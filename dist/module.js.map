{"version":3,"sources":["../src/module.js"],"names":["StatisticsCtrl","$scope","$injector","$location","linkSrv","base_path","plugin_path","dataType","series","data","fontSizes","fontSizesInt","unitFormats","invalidGaugeRange","valueNameOptions","value","text","iconPositionOptions","iconTypeOptions","panelDefaults","links","datasource","maxDataPoints","interval","targets","cacheTimeout","format","prefix","postfix","nullText","valueMaps","op","mappingTypes","name","rangeMaps","from","to","mappingType","nullPointMode","valueName","prefixFontSize","valueFontSize","postfixFontSize","thresholds","colorBackground","colorValue","colors","sparkline","show","full","lineColor","fillColor","gauge","minValue","maxValue","thresholdMarkers","thresholdLabels","trendIndicator","size","tableColumn","subtitle","orionURL","fiwareService","fiwareServicepath","entity","entityField","inputValue","iconType","iconPosition","allowActuation","defaultsDeep","panel","initModalValues","events","on","onDataReceived","bind","onDataError","onInitEditMode","onSparklineColorChange","onSparklineFillChange","handleClickActuation","showActuationModal","handleClickTitle","showDetailsModal","handleSendToRemote","sendToRemote","handleClickInput","sendInputToOrion","url","headers","fetch","method","mode","body","JSON","stringify","Headers","then","response","ok","console","info","warn","error","alert","catch","modal","allowedEntities","allowedTypes","type","valid","values","getDetailsModalValues","processTargets","modalScope","$new","publishAppEvent","src","modalClass","scope","initDetailModalValues","column","undefined","validFieldValues","processResponse","msg","document","querySelector","innerHTML","addEditorTab","getUnitFormats","subItem","refresh","err","dataList","debug","length","tableData","map","tableHandler","setTableValues","seriesHandler","setValues","render","seriesData","datapoints","alias","target","flotpairs","getFlotPairs","columnNames","columns","forEach","columnIndex","tableColumnOptions","find","setTableColumnToSensibleDefault","rows","datapoint","row","key","push","col","setValueMapping","isNaN","parseFloat","valueFormatted","isString","escape","valueRounded","decimalInfo","getDecimalsForValue","formatFunc","valueFormats","decimals","scaledDecimals","roundValue","options","background","tmp","panelColorIndex","color","newColor","isNumber","delta","dec","Math","floor","log","LN10","magn","pow","norm","result","max","Error","message","lastPoint","last","lastValue","isArray","stats","scopedVars","extend","label","i","index","indexOf","splice","rangeMap","lines_total","cols_total","pair","c","l","elem","attrs","ctrl","$timeout","templateSrv","linkInfo","$panelContainer","applyColoringThresholds","valueString","getColorForValue","getDiv","className","fontSize","content","replace","spanContent","getTrendIndicator","trendIndicatorValue","icon","getBigValueHtml","icon_class","getValueText","addGauge","width","height","dimension","min","plotCanvas","plotCss","top","margin","position","css","colorMap","bgColor","bootData","user","lightTheme","fontScale","parseInt","gaugeWidthReduceRatio","gaugeWidth","thresholdMarkersWidth","thresholdLabelFontSize","gauges","border","shadow","frame","layout","thresholdWidth","cell","threshold","font","formatter","family","append","plotSeries","plot","addSparkline","setTimeout","bottom","left","dynamicHeightMargin","round","legend","lines","fill","lineWidth","yaxes","xaxis","range","valueOf","grid","hoverable","setPanelBackground","fullscreen","split","strVale","Number","trim","html","toggleClass","hookupDrilldownLinkTooltip","drilldownTooltip","mouseleave","detach","click","evt","parents","window","open","href","location","mousemove","e","title","place_tt","pageX","pageY","renderingCompleted","isFinite","first","whereClauses","filter","operator","metrics","metricAggs","entities","fields","templateUrl","PanelCtrl"],"mappings":"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","file":"module.js","sourcesContent":["import _ from 'lodash';\nimport $ from 'jquery';\nimport 'vendor/flot/jquery.flot.js';\nimport 'vendor/flot/jquery.flot.time.js';\nimport 'vendor/flot/jquery.flot.gauge.js';\n//grafana specific\nimport kbn from 'app/core/utils/kbn';\nimport config from 'app/core/config';\nimport TimeSeries from 'app/core/time_series2';\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\n//plugin specific\nimport definitions from './definitions';\nimport './styles/panel.css!';\n\nclass StatisticsCtrl extends MetricsPanelCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, linkSrv) {\n    super($scope, $injector);\n\n    this.base_path = definitions.plugin_path;\n    this.dataType = 'timeseries';\n    this.series = [];\n    this.data = [];\n    this.fontSizes = [];\n    this.fontSizesInt = [];\n    this.unitFormats = [];\n    this.invalidGaugeRange = false;\n\n    this.valueNameOptions = [\n        { value: 'min', text: 'Min' },\n        { value: 'max', text: 'Max' },\n        { value: 'avg', text: 'Average' },\n        { value: 'current', text: 'Current' },\n        { value: 'total', text: 'Total' },\n        { value: 'name', text: 'Name' },\n        { value: 'first', text: 'First' },\n        { value: 'delta', text: 'Delta' },\n        { value: 'diff', text: 'Difference' },\n        { value: 'range', text: 'Range' },\n        { value: 'last_time', text: 'Time of last point' },\n    ];\n    this.iconPositionOptions = [ 'title', 'value'];\n    this.iconTypeOptions = [\n      'none',\n      'address-book',\n      'address-book-o',\n      'address-card',\n      'address-card-o',\n      'adjust',\n      'adn',\n      'align-center',\n      'align-justify',\n      'align-left',\n      'align-right',\n      'amazon',\n      'ambulance',\n      'american-sign-language-interpreting',\n      'anchor',\n      'android',\n      'angellist',\n      'angle-double-down',\n      'angle-double-left',\n      'angle-double-right',\n      'angle-double-up',\n      'angle-down',\n      'angle-left',\n      'angle-right',\n      'angle-up',\n      'apple',\n      'archive',\n      'area-chart',\n      'arrow-circle-down',\n      'arrow-circle-left',\n      'arrow-circle-o-down',\n      'arrow-circle-o-left',\n      'arrow-circle-o-right',\n      'arrow-circle-o-up',\n      'arrow-circle-right',\n      'arrow-circle-up',\n      'arrow-down',\n      'arrow-left',\n      'arrow-right',\n      'arrow-up',\n      'arrows',\n      'arrows-alt',\n      'arrows-h',\n      'arrows-v',\n      'asl-interpreting',\n      'assistive-listening-systems',\n      'asterisk',\n      'at',\n      'audio-description',\n      'automobile',\n      'backward',\n      'balance-scale',\n      'ban',\n      'bandcamp',\n      'bank',\n      'bar-chart',\n      'bar-chart-o',\n      'barcode',\n      'bars',\n      'bath',\n      'bathtub',\n      'battery',\n      'battery-0',\n      'battery-1',\n      'battery-2',\n      'battery-3',\n      'battery-4',\n      'battery-empty',\n      'battery-full',\n      'battery-half',\n      'battery-quarter',\n      'battery-three-quarters',\n      'bed',\n      'beer',\n      'behance',\n      'behance-square',\n      'bell',\n      'bell-o',\n      'bell-slash',\n      'bell-slash-o',\n      'bicycle',\n      'binoculars',\n      'birthday-cake',\n      'bitbucket',\n      'bitbucket-square',\n      'bitcoin',\n      'black-tie',\n      'blind',\n      'bluetooth',\n      'bluetooth-b',\n      'bold',\n      'bolt',\n      'bomb',\n      'book',\n      'bookmark',\n      'bookmark-o',\n      'braille',\n      'briefcase',\n      'btc',\n      'bug',\n      'building',\n      'building-o',\n      'bullhorn',\n      'bullseye',\n      'bus',\n      'buysellads',\n      'cab',\n      'calculator',\n      'calendar',\n      'calendar-check-o',\n      'calendar-minus-o',\n      'calendar-o',\n      'calendar-plus-o',\n      'calendar-times-o',\n      'camera',\n      'camera-retro',\n      'car',\n      'caret-down',\n      'caret-left',\n      'caret-right',\n      'caret-square-o-down',\n      'caret-square-o-left',\n      'caret-square-o-right',\n      'caret-square-o-up',\n      'caret-up',\n      'cart-arrow-down',\n      'cart-plus',\n      'cc',\n      'cc-amex',\n      'cc-diners-club',\n      'cc-discover',\n      'cc-jcb',\n      'cc-mastercard',\n      'cc-paypal',\n      'cc-stripe',\n      'cc-visa',\n      'certificate',\n      'chain',\n      'chain-broken',\n      'check',\n      'check-circle',\n      'check-circle-o',\n      'check-square',\n      'check-square-o',\n      'chevron-circle-down',\n      'chevron-circle-left',\n      'chevron-circle-right',\n      'chevron-circle-up',\n      'chevron-down',\n      'chevron-left',\n      'chevron-right',\n      'chevron-up',\n      'child',\n      'chrome',\n      'circle',\n      'circle-o',\n      'circle-o-notch',\n      'circle-thin',\n      'clipboard',\n      'clock-o',\n      'clone',\n      'close',\n      'cloud',\n      'cloud-download',\n      'cloud-upload',\n      'cny',\n      'code',\n      'code-fork',\n      'codepen',\n      'codiepie',\n      'coffee',\n      'cog',\n      'cogs',\n      'columns',\n      'comment',\n      'comment-o',\n      'commenting',\n      'commenting-o',\n      'comments',\n      'comments-o',\n      'compass',\n      'compress',\n      'connectdevelop',\n      'contao',\n      'copy',\n      'copyright',\n      'creative-commons',\n      'credit-card',\n      'credit-card-alt',\n      'crop',\n      'crosshairs',\n      'css3',\n      'cube',\n      'cubes',\n      'cut',\n      'cutlery',\n      'dashboard',\n      'dashcube',\n      'database',\n      'deaf',\n      'deafness',\n      'dedent',\n      'delicious',\n      'desktop',\n      'deviantart',\n      'diamond',\n      'digg',\n      'dollar',\n      'dot-circle-o',\n      'download',\n      'dribbble',\n      'drivers-license',\n      'drivers-license-o',\n      'dropbox',\n      'drupal',\n      'edge',\n      'edit',\n      'eercast',\n      'eject',\n      'ellipsis-h',\n      'ellipsis-v',\n      'empire',\n      'envelope',\n      'envelope-o',\n      'envelope-open',\n      'envelope-open-o',\n      'envelope-square',\n      'envira',\n      'eraser',\n      'etsy',\n      'eur',\n      'euro',\n      'exchange',\n      'exclamation',\n      'exclamation-circle',\n      'exclamation-triangle',\n      'expand',\n      'expeditedssl',\n      'external-link',\n      'external-link-square',\n      'eye',\n      'eye-slash',\n      'eyedropper',\n      'fa',\n      'facebook',\n      'facebook-f',\n      'facebook-official',\n      'facebook-square',\n      'fast-backward',\n      'fast-forward',\n      'fax',\n      'feed',\n      'female',\n      'fighter-jet',\n      'file',\n      'file-archive-o',\n      'file-audio-o',\n      'file-code-o',\n      'file-excel-o',\n      'file-image-o',\n      'file-movie-o',\n      'file-o',\n      'file-pdf-o',\n      'file-photo-o',\n      'file-picture-o',\n      'file-powerpoint-o',\n      'file-sound-o',\n      'file-text',\n      'file-text-o',\n      'file-video-o',\n      'file-word-o',\n      'file-zip-o',\n      'files-o',\n      'film',\n      'filter',\n      'fire',\n      'fire-extinguisher',\n      'firefox',\n      'first-order',\n      'flag',\n      'flag-checkered',\n      'flag-o',\n      'flash',\n      'flask',\n      'flickr',\n      'floppy-o',\n      'folder',\n      'folder-o',\n      'folder-open',\n      'folder-open-o',\n      'font',\n      'font-awesome',\n      'fonticons',\n      'fort-awesome',\n      'forumbee',\n      'forward',\n      'foursquare',\n      'free-code-camp',\n      'frown-o',\n      'futbol-o',\n      'gamepad',\n      'gavel',\n      'gbp',\n      'ge',\n      'gear',\n      'gears',\n      'genderless',\n      'get-pocket',\n      'gg',\n      'gg-circle',\n      'gift',\n      'git',\n      'git-square',\n      'github',\n      'github-alt',\n      'github-square',\n      'gitlab',\n      'gittip',\n      'glass',\n      'glide',\n      'glide-g',\n      'globe',\n      'google',\n      'google-plus',\n      'google-plus-circle',\n      'google-plus-official',\n      'google-plus-square',\n      'google-wallet',\n      'graduation-cap',\n      'gratipay',\n      'grav',\n      'group',\n      'h-square',\n      'hacker-news',\n      'hand-grab-o',\n      'hand-lizard-o',\n      'hand-o-down',\n      'hand-o-left',\n      'hand-o-right',\n      'hand-o-up',\n      'hand-paper-o',\n      'hand-peace-o',\n      'hand-pointer-o',\n      'hand-rock-o',\n      'hand-scissors-o',\n      'hand-spock-o',\n      'hand-stop-o',\n      'handshake-o',\n      'hard-of-hearing',\n      'hashtag',\n      'hdd-o',\n      'header',\n      'headphones',\n      'heart',\n      'heart-o',\n      'heartbeat',\n      'history',\n      'home',\n      'hospital-o',\n      'hotel',\n      'hourglass',\n      'hourglass-1',\n      'hourglass-2',\n      'hourglass-3',\n      'hourglass-end',\n      'hourglass-half',\n      'hourglass-o',\n      'hourglass-start',\n      'houzz',\n      'html5',\n      'i-cursor',\n      'id-badge',\n      'id-card',\n      'id-card-o',\n      'ils',\n      'image',\n      'imdb',\n      'inbox',\n      'indent',\n      'industry',\n      'info',\n      'info-circle',\n      'inr',\n      'instagram',\n      'institution',\n      'internet-explorer',\n      'intersex',\n      'ioxhost',\n      'italic',\n      'joomla',\n      'jpy',\n      'jsfiddle',\n      'key',\n      'keyboard-o',\n      'krw',\n      'language',\n      'laptop',\n      'lastfm',\n      'lastfm-square',\n      'leaf',\n      'leanpub',\n      'legal',\n      'lemon-o',\n      'level-down',\n      'level-up',\n      'life-bouy',\n      'life-buoy',\n      'life-ring',\n      'life-saver',\n      'lightbulb-o',\n      'line-chart',\n      'link',\n      'linkedin',\n      'linkedin-square',\n      'linode',\n      'linux',\n      'list',\n      'list-alt',\n      'list-ol',\n      'list-ul',\n      'location-arrow',\n      'lock',\n      'long-arrow-down',\n      'long-arrow-left',\n      'long-arrow-right',\n      'long-arrow-up',\n      'low-vision',\n      'magic',\n      'magnet',\n      'mail-forward',\n      'mail-reply',\n      'mail-reply-all',\n      'male',\n      'map',\n      'map-marker',\n      'map-o',\n      'map-pin',\n      'map-signs',\n      'mars',\n      'mars-double',\n      'mars-stroke',\n      'mars-stroke-h',\n      'mars-stroke-v',\n      'maxcdn',\n      'meanpath',\n      'medium',\n      'medkit',\n      'meetup',\n      'meh-o',\n      'mercury',\n      'microchip',\n      'microphone',\n      'microphone-slash',\n      'minus',\n      'minus-circle',\n      'minus-square',\n      'minus-square-o',\n      'mixcloud',\n      'mobile',\n      'mobile-phone',\n      'modx',\n      'money',\n      'moon-o',\n      'mortar-board',\n      'motorcycle',\n      'mouse-pointer',\n      'music',\n      'navicon',\n      'neuter',\n      'newspaper-o',\n      'object-group',\n      'object-ungroup',\n      'odnoklassniki',\n      'odnoklassniki-square',\n      'opencart',\n      'openid',\n      'opera',\n      'optin-monster',\n      'outdent',\n      'pagelines',\n      'paint-brush',\n      'paper-plane',\n      'paper-plane-o',\n      'paperclip',\n      'paragraph',\n      'paste',\n      'pause',\n      'pause-circle',\n      'pause-circle-o',\n      'paw',\n      'paypal',\n      'pencil',\n      'pencil-square',\n      'pencil-square-o',\n      'percent',\n      'phone',\n      'phone-square',\n      'photo',\n      'picture-o',\n      'pie-chart',\n      'pied-piper',\n      'pied-piper-alt',\n      'pied-piper-pp',\n      'pinterest',\n      'pinterest-p',\n      'pinterest-square',\n      'plane',\n      'play',\n      'play-circle',\n      'play-circle-o',\n      'plug',\n      'plus',\n      'plus-circle',\n      'plus-square',\n      'plus-square-o',\n      'podcast',\n      'power-off',\n      'print',\n      'product-hunt',\n      'puzzle-piece',\n      'qq',\n      'qrcode',\n      'question',\n      'question-circle',\n      'question-circle-o',\n      'quora',\n      'quote-left',\n      'quote-right',\n      'ra',\n      'random',\n      'ravelry',\n      'rebel',\n      'recycle',\n      'reddit',\n      'reddit-alien',\n      'reddit-square',\n      'refresh',\n      'registered',\n      'remove',\n      'renren',\n      'reorder',\n      'repeat',\n      'reply',\n      'reply-all',\n      'resistance',\n      'retweet',\n      'rmb',\n      'road',\n      'rocket',\n      'rotate-left',\n      'rotate-right',\n      'rouble',\n      'rss',\n      'rss-square',\n      'rub',\n      'ruble',\n      'rupee',\n      's15',\n      'safari',\n      'save',\n      'scissors',\n      'scribd',\n      'search',\n      'search-minus',\n      'search-plus',\n      'sellsy',\n      'send',\n      'send-o',\n      'server',\n      'share',\n      'share-alt',\n      'share-alt-square',\n      'share-square',\n      'share-square-o',\n      'shekel',\n      'sheqel',\n      'shield',\n      'ship',\n      'shirtsinbulk',\n      'shopping-bag',\n      'shopping-basket',\n      'shopping-cart',\n      'shower',\n      'sign-in',\n      'sign-language',\n      'sign-out',\n      'signal',\n      'signing',\n      'simplybuilt',\n      'sitemap',\n      'skyatlas',\n      'skype',\n      'slack',\n      'sliders',\n      'slideshare',\n      'smile-o',\n      'snapchat',\n      'snapchat-ghost',\n      'snapchat-square',\n      'snowflake-o',\n      'soccer-ball-o',\n      'sort',\n      'sort-alpha-asc',\n      'sort-alpha-desc',\n      'sort-amount-asc',\n      'sort-amount-desc',\n      'sort-asc',\n      'sort-desc',\n      'sort-down',\n      'sort-numeric-asc',\n      'sort-numeric-desc',\n      'sort-up',\n      'soundcloud',\n      'space-shuttle',\n      'spinner',\n      'spoon',\n      'spotify',\n      'square',\n      'square-o',\n      'stack-exchange',\n      'stack-overflow',\n      'star',\n      'star-half',\n      'star-half-empty',\n      'star-half-full',\n      'star-half-o',\n      'star-o',\n      'steam',\n      'steam-square',\n      'step-backward',\n      'step-forward',\n      'stethoscope',\n      'sticky-note',\n      'sticky-note-o',\n      'stop',\n      'stop-circle',\n      'stop-circle-o',\n      'street-view',\n      'strikethrough',\n      'stumbleupon',\n      'stumbleupon-circle',\n      'subscript',\n      'subway',\n      'suitcase',\n      'sun-o',\n      'superpowers',\n      'superscript',\n      'support',\n      'table',\n      'tablet',\n      'tachometer',\n      'tag',\n      'tags',\n      'tasks',\n      'taxi',\n      'telegram',\n      'television',\n      'tencent-weibo',\n      'terminal',\n      'text-height',\n      'text-width',\n      'th',\n      'th-large',\n      'th-list',\n      'themeisle',\n      'thermometer',\n      'thermometer-0',\n      'thermometer-1',\n      'thermometer-2',\n      'thermometer-3',\n      'thermometer-4',\n      'thermometer-empty',\n      'thermometer-full',\n      'thermometer-half',\n      'thermometer-quarter',\n      'thermometer-three-quarters',\n      'thumb-tack',\n      'thumbs-down',\n      'thumbs-o-down',\n      'thumbs-o-up',\n      'thumbs-up',\n      'ticket',\n      'times',\n      'times-circle',\n      'times-circle-o',\n      'times-rectangle',\n      'times-rectangle-o',\n      'tint',\n      'toggle-down',\n      'toggle-left',\n      'toggle-off',\n      'toggle-on',\n      'toggle-right',\n      'toggle-up',\n      'trademark',\n      'train',\n      'transgender',\n      'transgender-alt',\n      'trash',\n      'trash-o',\n      'tree',\n      'trello',\n      'tripadvisor',\n      'trophy',\n      'truck',\n      'try',\n      'tty',\n      'tumblr',\n      'tumblr-square',\n      'turkish-lira',\n      'tv',\n      'twitch',\n      'twitter',\n      'twitter-square',\n      'umbrella',\n      'underline',\n      'undo',\n      'universal-access',\n      'university',\n      'unlink',\n      'unlock',\n      'unlock-alt',\n      'unsorted',\n      'upload',\n      'usb',\n      'usd',\n      'user',\n      'user-circle',\n      'user-circle-o',\n      'user-md',\n      'user-o',\n      'user-plus',\n      'user-secret',\n      'user-times',\n      'users',\n      'vcard',\n      'vcard-o',\n      'venus',\n      'venus-double',\n      'venus-mars',\n      'viacoin',\n      'viadeo',\n      'viadeo-square',\n      'video-camera',\n      'vimeo',\n      'vimeo-square',\n      'vine',\n      'vk',\n      'volume-control-phone',\n      'volume-down',\n      'volume-off',\n      'volume-up',\n      'warning',\n      'wechat',\n      'weibo',\n      'weixin',\n      'whatsapp',\n      'wheelchair',\n      'wheelchair-alt',\n      'wifi',\n      'wikipedia-w',\n      'window-close',\n      'window-close-o',\n      'window-maximize',\n      'window-minimize',\n      'window-restore',\n      'windows',\n      'won',\n      'wordpress',\n      'wpbeginner',\n      'wpexplorer',\n      'wpforms',\n      'wrench',\n      'xing',\n      'xing-square',\n      'y-combinator',\n      'y-combinator-square',\n      'yahoo',\n      'yc',\n      'yc-square',\n      'yelp',\n      'yen',\n      'yoast',\n      'youtube',\n      'youtube-play']\n\n    // Set and populate defaults\n    this.panelDefaults = {\n      links: [],\n      datasource: null,\n      maxDataPoints: 100,\n      interval: null,\n      targets: [{}],\n      cacheTimeout: null,\n      format: 'none',\n      prefix: '',\n      postfix: '',\n      nullText: null,\n      valueMaps: [{ value: 'null', op: '=', text: 'N/A' }],\n      mappingTypes: [{ name: 'value to text', value: 1 }, { name: 'range to text', value: 2 }],\n      rangeMaps: [{ from: 'null', to: 'null', text: 'N/A' }],\n      mappingType: 1,\n      nullPointMode: 'connected',\n      valueName: 'avg',\n      prefixFontSize: '50%',\n      valueFontSize: '80%',\n      postfixFontSize: '50%',\n      thresholds: '',\n      colorBackground: false,\n      colorValue: false,\n      colors: ['#299c46', 'rgba(237, 129, 40, 0.89)', '#d44a3a'],\n      sparkline: {\n        show: false,\n        full: false,\n        lineColor: 'rgb(31, 120, 193)',\n        fillColor: 'rgba(31, 118, 189, 0.18)',\n      },\n      gauge: {\n        show: false,\n        minValue: 0,\n        maxValue: 100,\n        thresholdMarkers: true,\n        thresholdLabels: false,\n      },\n      trendIndicator: {\n        show: false,\n        size: 30\n      },\n      tableColumn: '',\n      subtitle: 'NA',\n      orionURL: 'https://api.s.orchestracities.com/context',\n      fiwareService: 'default',\n      fiwareServicepath: '/',\n      entity: '',\n      entityField: '',\n      inputValue: 0,\n      maxValue: 100,\n      minValue: 0,\n      iconType: '',\n      iconPosition: '',\n      allowActuation: false,\n    };\n\n    _.defaultsDeep(this.panel, this.panelDefaults);\n\n    this.initModalValues();\n\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n\n    this.onSparklineColorChange = this.onSparklineColorChange.bind(this);\n    this.onSparklineFillChange = this.onSparklineFillChange.bind(this);\n\n    this.handleClickActuation = this.showActuationModal.bind(this);\n    this.handleClickTitle = this.showDetailsModal.bind(this);\n    this.handleSendToRemote = this.sendToRemote.bind(this);\n\n    this.handleClickInput = this.sendInputToOrion.bind(this);\n  }\n\n  sendInputToOrion() {\n    let url = this.panel.orionURL + '/v2/entities/' + this.panel.entity + '/attrs/?options=keyValues'\n    let data = {}\n    data[this.panel.entityField] = this.panel.inputValue\n    const headers = {\n        'Content-Type': 'application/json',\n        'Fiware-Service': this.panel.fiwareService,\n        'Fiware-ServicePath': this.panel.fiwareServicepath\n      }\n    fetch(url, {\n      method: 'POST',\n      mode: 'cors', // no-cors, cors, *same-origin\n      body: JSON.stringify(data), // data can be `string` or {object}!\n      headers: new Headers(headers)\n    })\n    .then((response) => {\n      if(response.ok) {\n        console.info('Success:', response)\n      } else {\n        console.warn('Error:', error)\n        alert('An error has occured: failed to update')\n      }\n    })\n    .catch((error) => {\n      console.warn('Error:', error)\n      alert('An error has occured: failed to update')\n    })\n  }\n\n  initModalValues() {\n    this.modal = {\n      allowedEntities: [],\n      allowedTypes: [],\n      entity: {},\n      type: {},\n      value: '',\n      valid: false\n    }\n  }\n\n  initDetailModalValues() {\n    this.modal = { values: this.getDetailsModalValues() }\n  }\n\n  showActuationModal() {\n    if(!this.panel.allowActuation)\n      return ;\n\n    this.initModalValues();\n\n    [this.modal.allowedEntities, this.modal.allowedTypes] = processTargets(this.panel.targets)\n    let modalScope = this.$scope.$new();\n    modalScope.panel = this.panel;\n\n    this.publishAppEvent('show-modal', {\n      src: this.base_path+'partials/modal_actuation.html',\n      modalClass: 'confirm-modal',\n      scope: modalScope,\n    });\n  }\n\n  showDetailsModal() {\n\n    this.initDetailModalValues();\n\n    let modalScope = this.$scope.$new();\n    modalScope.panel = this.panel;\n\n    this.publishAppEvent('show-modal', {\n      src: this.base_path+'partials/modal_details.html',\n      modalClass: 'confirm-modal',\n      scope: modalScope,\n    });\n  }\n\n  validFieldValues() {\n    return (this.modal.type.column!==undefined && this.modal.entity.value!==undefined && this.modal.value!==undefined && this.modal.value!=='')\n  }\n\n  sendToRemote() {\n    this.modal.valid=this.validFieldValues()\n    if(!this.modal.valid) {\n      processResponse('warning', 'Please, choose or set all fields!')\n      return ;\n    }\n\n    let url = this.panel.orionURL + '/v2/entities/' + this.modal.entity.value + '/attrs/?options=keyValues'\n    let data = {}\n    data[this.modal.type.column] = this.modal.value\n    console.info(url)\n    console.info(data)\n    const headers = {\n        'Content-Type': 'application/json',\n        'Fiware-Service': this.panel.fiwareService,\n        'Fiware-ServicePath': this.panel.fiwareServicepath\n      }\n    fetch(url, {\n      method: 'POST',\n      mode: 'cors', // no-cors, cors, *same-origin\n      body: JSON.stringify(data), // data can be `string` or {object}!\n      headers: new Headers(headers)\n    })\n    .then((response) => {\n      if(response.ok) {\n        console.info('Success:', response)\n        processResponse('success', 'Successfuly updated!')\n      } else\n        processResponse('warning', 'Error updating!')\n    })\n    .catch((error) => {\n      console.warn('Error:', error)\n      processResponse('warning', error)\n    })\n\n    function processResponse(type, msg) {\n      document.querySelector('.modal-content > .server-response').innerHTML=`<div class='alert alert-${type} fade in alert-dismissible'>${msg}</div>`\n    }\n  }\n\n  onInitEditMode() {\n    this.fontSizes = ['20%', '30%', '50%', '70%', '80%', '100%', '110%', '120%', '150%', '170%', '200%'];\n    this.fontSizesInt = [10, 30, 50, 70, 80, 100, 110, 120];\n    this.addEditorTab('Options', `${definitions.plugin_path}partials/editor.html`, 2);\n    this.addEditorTab('Value Mappings', `${definitions.plugin_path}partials/mappings.html`, 3);\n    this.unitFormats = kbn.getUnitFormats();\n  }\n\n  setUnitFormat(subItem) {\n    this.panel.format = subItem.value;\n    this.refresh();\n  }\n\n  onDataError(err) {\n    this.onDataReceived([]);\n  }\n\n  onDataReceived(dataList) {\n    if(!dataList) {\n      console.debug('No data recieved')\n      return ;\n    }\n\n    if(dataList.length === 0) {\n      console.debug('No dataList recieved')\n      return;\n    }\n\n    let data = {};\n\n    if (dataList.length > 0 && dataList[0].type === 'table') {\n      this.dataType = 'table';\n      const tableData = dataList.map(this.tableHandler.bind(this));\n      this.setTableValues(tableData, data);\n    } else {\n      this.dataType = 'timeseries';\n      this.series = dataList.map(this.seriesHandler.bind(this));\n      this.setValues(data);\n    }\n\n    this.data = data;\n    console.debug(this.data)\n    this.render();\n  }\n\n  seriesHandler(seriesData) {\n    var series = new TimeSeries({\n      datapoints: seriesData.datapoints || [],\n      alias: seriesData.target,\n    });\n\n    series.flotpairs = series.getFlotPairs(this.panel.nullPointMode);\n    return series;\n  }\n\n  tableHandler(tableData) {\n    const datapoints = [];\n    const columnNames = {};\n\n    tableData.columns.forEach((column, columnIndex) => {\n      columnNames[columnIndex] = column.text;\n    });\n\n    this.tableColumnOptions = columnNames;\n    if (!_.find(tableData.columns, ['text', this.panel.tableColumn])) {\n      this.setTableColumnToSensibleDefault(tableData);\n    }\n\n    tableData.rows.forEach(row => {\n      const datapoint = {};\n\n      row.forEach((value, columnIndex) => {\n        const key = columnNames[columnIndex];\n        datapoint[key] = value;\n      });\n\n      datapoints.push(datapoint);\n    });\n\n    return datapoints;\n  }\n\n  setTableColumnToSensibleDefault(tableData) {\n    if (this.tableColumnOptions.length === 1) {\n      this.panel.tableColumn = this.tableColumnOptions[0];\n    } else {\n      this.panel.tableColumn = _.find(tableData.columns, col => {\n        return col.type !== 'time';\n      }).text;\n    }\n  }\n\n  setTableValues(tableData, data) {\n    if (!tableData || tableData.length === 0) {\n      return;\n    }\n\n    if (tableData[0].length === 0 || tableData[0][0][this.panel.tableColumn] === undefined) {\n      data.value = null;\n      this.setValueMapping(data);\n      if (!isNaN(parseFloat(data.valueFormatted))) data.value = parseFloat(data.valueFormatted);\n      return;\n    }\n\n    const datapoint = tableData[0][0];\n    data.value = datapoint[this.panel.tableColumn];\n\n    if (_.isString(data.value)) {\n      data.valueFormatted = _.escape(data.value);\n      data.value = 0;\n      data.valueRounded = 0;\n    } else {\n      const decimalInfo = this.getDecimalsForValue(data.value);\n      const formatFunc = kbn.valueFormats[this.panel.format];\n      data.valueFormatted = formatFunc(\n        datapoint[this.panel.tableColumn],\n        decimalInfo.decimals,\n        decimalInfo.scaledDecimals\n      );\n      data.valueRounded = kbn.roundValue(data.value, this.panel.decimals || 0);\n    }\n\n    this.setValueMapping(data);\n  }\n\n  canChangeFontSize() {\n    return this.panel.gauge.show;\n  }\n\n  setColoring(options) {\n    if (options.background) {\n      this.panel.colorValue = false;\n      this.panel.colors = ['rgba(71, 212, 59, 0.4)', 'rgba(245, 150, 40, 0.73)', 'rgba(225, 40, 40, 0.59)'];\n    } else {\n      this.panel.colorBackground = false;\n      this.panel.colors = ['rgba(50, 172, 45, 0.97)', 'rgba(237, 129, 40, 0.89)', 'rgba(245, 54, 54, 0.9)'];\n    }\n    this.render();\n  }\n\n  invertColorOrder() {\n    var tmp = this.panel.colors[0];\n    this.panel.colors[0] = this.panel.colors[2];\n    this.panel.colors[2] = tmp;\n    this.render();\n  }\n\n  onColorChange(panelColorIndex) {\n    return color => {\n      this.panel.colors[panelColorIndex] = color;\n      this.render();\n    };\n  }\n\n  onSparklineColorChange(newColor) {\n    this.panel.sparkline.lineColor = newColor;\n    this.render();\n  }\n\n  onSparklineFillChange(newColor) {\n    this.panel.sparkline.fillColor = newColor;\n    this.render();\n  }\n\n  getDecimalsForValue(value) {\n    if (_.isNumber(this.panel.decimals)) {\n      return { decimals: this.panel.decimals, scaledDecimals: null };\n    }\n\n    var delta = value / 2;\n    var dec = -Math.floor(Math.log(delta) / Math.LN10);\n\n    var magn = Math.pow(10, -dec),\n      norm = delta / magn, // norm is between 1.0 and 10.0\n      size;\n\n    if (norm < 1.5) {\n      size = 1;\n    } else if (norm < 3) {\n      size = 2;\n      // special case for 2.5, requires an extra decimal\n      if (norm > 2.25) {\n        size = 2.5;\n        ++dec;\n      }\n    } else if (norm < 7.5) {\n      size = 5;\n    } else {\n      size = 10;\n    }\n\n    size *= magn;\n\n    // reduce starting decimals if not needed\n    if (Math.floor(value) === value) {\n      dec = 0;\n    }\n\n    let result = {};\n    result.decimals = Math.max(0, dec);\n    result.scaledDecimals = result.decimals - Math.floor(Math.log(size) / Math.LN10) + 2;\n\n    return result;\n  }\n\n  setValues(data) {\n    data.flotpairs = [];\n\n    console.log('setValues...')\n    console.log(this.series)\n\n\n    if (this.series.length === 0) {\n      let error = new Error();\n      error.message = 'No Series Error';\n      error.data =\n        'Metric query returns ' +\n        this.series.length +\n        ' series. Single Stat Panel expects a series.\\n\\nResponse:\\n' +\n        JSON.stringify(this.series);\n      throw error;\n    }\n\n    if (this.series && this.series.length > 0) {\n      if (this.series.length > 1){\n        console.log('=> multiple series: #'+this.series.length)\n\n      }\n\n      let lastPoint = _.last(this.series[0].datapoints);\n      let lastValue = _.isArray(lastPoint) ? lastPoint[0] : null;\n\n      if (this.panel.valueName === 'name') {\n        data.value = 0;\n        data.valueRounded = 0;\n        data.valueFormatted = this.series[0].alias;\n      } else if (_.isString(lastValue)) {\n        data.value = 0;\n        data.valueFormatted = _.escape(lastValue);\n        data.valueRounded = 0;\n      } else if (this.panel.valueName === 'last_time') {\n        let formatFunc = kbn.valueFormats[this.panel.format];\n        data.value = lastPoint[1];\n        data.valueRounded = data.value;\n        data.valueFormatted = formatFunc(data.value, 0, 0);\n      } else {\n        data.value = this.series[0].stats[this.panel.valueName];\n        data.flotpairs = this.series[0].flotpairs;\n\n        let decimalInfo = this.getDecimalsForValue(data.value);\n        let formatFunc = kbn.valueFormats[this.panel.format];\n        data.valueFormatted = formatFunc(data.value, decimalInfo.decimals, decimalInfo.scaledDecimals);\n        data.valueRounded = kbn.roundValue(data.value, decimalInfo.decimals);\n      }\n\n      // Add $__name variable for using in prefix or postfix\n      data.scopedVars = _.extend({}, this.panel.scopedVars);\n      data.scopedVars['__name'] = { value: this.series[0].label };\n    }\n    this.setValueMapping(data);\n  }\n\n  setValueMapping(data) {\n    // check value to text mappings if its enabled\n    if (this.panel.mappingType === 1) {\n      for (let i = 0; i < this.panel.valueMaps.length; i++) {\n        let map = this.panel.valueMaps[i];\n        // special null case\n        if (map.value === 'null') {\n          if (data.value === null || data.value === void 0) {\n            data.valueFormatted = map.text;\n            return;\n          }\n          continue;\n        }\n\n        // value/number to text mapping\n        var value = parseFloat(map.value);\n        if (value === data.valueRounded) {\n          data.valueFormatted = map.text;\n          return;\n        }\n      }\n    } else if (this.panel.mappingType === 2) {\n      for (let i = 0; i < this.panel.rangeMaps.length; i++) {\n        let map = this.panel.rangeMaps[i];\n        // special null case\n        if (map.from === 'null' && map.to === 'null') {\n          if (data.value === null || data.value === void 0) {\n            data.valueFormatted = map.text;\n            return;\n          }\n          continue;\n        }\n\n        // value/number to range mapping\n        var from = parseFloat(map.from);\n        var to = parseFloat(map.to);\n        if (to >= data.valueRounded && from <= data.valueRounded) {\n          data.valueFormatted = map.text;\n          return;\n        }\n      }\n    }\n\n    if (data.value === null || data.value === void 0) {\n      data.valueFormatted = 'no value';\n    }\n  }\n\n  removeValueMap(map) {\n    var index = _.indexOf(this.panel.valueMaps, map);\n    this.panel.valueMaps.splice(index, 1);\n    this.render();\n  }\n\n  addValueMap() {\n    this.panel.valueMaps.push({ value: '', op: '=', text: '' });\n  }\n\n  removeRangeMap(rangeMap) {\n    var index = _.indexOf(this.panel.rangeMaps, rangeMap);\n    this.panel.rangeMaps.splice(index, 1);\n    this.render();\n  }\n\n  addRangeMap() {\n    this.panel.rangeMaps.push({ from: '', to: '', text: '' });\n  }\n\n  getDetailsModalValues() {\n    if(!this.series[0].datapoints)\n      return ;\n    let lines_total = this.series.length\n    let cols_total = this.series[0].datapoints.length\n\n    let result = []\n    let pair = null\n\n    for(let c=0; c<cols_total; c++) {\n      pair = {}\n      for(let l=0; l<lines_total; l++) {\n        pair[this.series[l].alias||this.series[l].label] = this.series[l].datapoints[c][0]\n      }\n      result.push(pair)\n    }\n\n    return result\n  }\n\n  link(scope, elem, attrs, ctrl) {\n    let $location = this.$location;\n    let linkSrv = this.linkSrv;\n    let $timeout = this.$timeout;\n    let panel = ctrl.panel;\n    let templateSrv = this.templateSrv;\n    let data, linkInfo;\n\n    let $panelContainer = elem.find('.panel-container');\n    elem = elem.find('.statistics-panel-value-container');\n\n    function applyColoringThresholds(value, valueString) {\n      if (!panel.colorValue) {\n        return valueString;\n      }\n\n      var color = getColorForValue(data, value);\n      if (color) {\n        return '<span style=\"color:' + color + '\">' + valueString + '</span>';\n      }\n\n      return valueString;\n    }\n\n    function getDiv(className, fontSize, content) {\n      content = templateSrv.replace(content, data.scopedVars);\n      let spanContent = '<div class=\"' + className;\n      if(fontSize)\n        spanContent += '\" style=\"font-size:' + fontSize;\n\n      spanContent += '\">' + content + '</div>';\n      return spanContent;\n    }\n\n    function getTrendIndicator() {\n      //probably the 'Format as' is of type 'table'. 'table' is not supported\n      if(!data.flotpairs && data.flotpairs.length<=1) {\n        console.info('Unable to show trend. Please, choose other interval or verify the resultset.');\n        return `<span></span>`;\n      }\n\n      console.debug(`first value: ${data.flotpairs[0][1]}, last value: ${data.flotpairs[data.flotpairs.length-1][1]}`)\n      let trendIndicatorValue = data.flotpairs[data.flotpairs.length-1][1]-data.flotpairs[0][1]\n      let icon;\n\n      console.debug(`trendIndicatorValue: ${trendIndicatorValue}`)\n\n      if(trendIndicatorValue<0)\n        icon = 'fa-arrow-down';\n      else if(trendIndicatorValue>0)\n        icon = 'fa-arrow-up';\n      else\n        icon = 'fa-arrow-right';\n\n      return `<span><i class=\"fa ${icon}\"></i></span>`;\n    }\n\n    function getBigValueHtml() {\n      var body = '';\n\n      if (panel.iconPosition === \"value\") {\n        var icon_class = `fa fa-${panel.iconType}`;\n        body += getDiv(icon_class, panel.prefixFontSize, '');\n      }\n\n      if (panel.prefix) {\n        var prefix = applyColoringThresholds(data.value, panel.prefix);\n        body += getDiv('statistics-panel-prefix', panel.prefixFontSize, prefix);\n      }\n\n      var value = applyColoringThresholds(data.value, data.valueFormatted);\n      body += getDiv('statistics-panel-value', panel.valueFontSize, value);\n\n      if (panel.postfix) {\n        var postfix = applyColoringThresholds(data.value, panel.postfix);\n        body += getDiv('statistics-panel-postfix', panel.postfixFontSize, postfix);\n      }\n\n      if (panel.trendIndicator.show) {\n        body += getDiv('statistics-panel-trendIndicator', `${panel.trendIndicator.size}px`, getTrendIndicator());\n      }\n\n\n      return body;\n    }\n\n    function getValueText() {\n      var result = panel.prefix ? templateSrv.replace(panel.prefix, data.scopedVars) : '';\n      result += data.valueFormatted;\n      result += panel.postfix ? templateSrv.replace(panel.postfix, data.scopedVars) : '';\n\n      return result;\n    }\n\n    function addGauge() {\n      var width = elem.width();\n      var height = elem.height();\n      // Allow to use a bit more space for wide gauges\n      var dimension = Math.min(width, height * 1.3);\n\n      ctrl.invalidGaugeRange = false;\n      if (panel.gauge.minValue > panel.gauge.maxValue) {\n        ctrl.invalidGaugeRange = true;\n        return;\n      }\n\n      var plotCanvas = $('<div></div>');\n      var plotCss = {\n        top: '10px',\n        margin: 'auto',\n        position: 'relative',\n        height: height * 0.9 + 'px',\n        width: dimension + 'px',\n      };\n\n      plotCanvas.css(plotCss);\n\n      var thresholds = [];\n      for (var i = 0; i < data.thresholds.length; i++) {\n        thresholds.push({\n          value: data.thresholds[i],\n          color: data.colorMap[i],\n        });\n      }\n      thresholds.push({\n        value: panel.gauge.maxValue,\n        color: data.colorMap[data.colorMap.length - 1],\n      });\n\n      var bgColor = config.bootData.user.lightTheme ? 'rgb(230,230,230)' : 'rgb(38,38,38)';\n\n      var fontScale = parseInt(panel.valueFontSize) / 100;\n      var fontSize = Math.min(dimension / 5, 100) * fontScale;\n      // Reduce gauge width if threshold labels enabled\n      var gaugeWidthReduceRatio = panel.gauge.thresholdLabels ? 1.5 : 1;\n      var gaugeWidth = Math.min(dimension / 6, 60) / gaugeWidthReduceRatio;\n      var thresholdMarkersWidth = gaugeWidth / 5;\n      var thresholdLabelFontSize = fontSize / 2.5;\n\n      var options = {\n        series: {\n          gauges: {\n            gauge: {\n              min: panel.gauge.minValue,\n              max: panel.gauge.maxValue,\n              background: { color: bgColor },\n              border: { color: null },\n              shadow: { show: false },\n              width: gaugeWidth,\n            },\n            frame: { show: false },\n            label: { show: false },\n            layout: { margin: 0, thresholdWidth: 0 },\n            cell: { border: { width: 0 } },\n            threshold: {\n              values: thresholds,\n              label: {\n                show: panel.gauge.thresholdLabels,\n                margin: thresholdMarkersWidth + 1,\n                font: { size: thresholdLabelFontSize },\n              },\n              show: panel.gauge.thresholdMarkers,\n              width: thresholdMarkersWidth,\n            },\n            value: {\n              color: panel.colorValue ? getColorForValue(data, data.valueRounded) : null,\n              formatter: function() {\n                return getValueText();\n              },\n              font: {\n                size: fontSize,\n                family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif',\n              },\n            },\n            show: true,\n          },\n        },\n      };\n\n      elem.append(plotCanvas);\n\n      var plotSeries = {\n        data: [[0, data.valueRounded]],\n      };\n\n      $.plot(plotCanvas, [plotSeries], options);\n    }\n\n    function addSparkline() {\n      var width = elem.width() + 20;\n      if (width < 30) {\n        // element has not gotten it's width yet\n        // delay sparkline render\n        setTimeout(addSparkline, 30);\n        return;\n      }\n\n      var height = ctrl.height;\n      var plotCanvas = $('<div></div>');\n      var plotCss = {};\n      plotCss.position = 'absolute';\n\n      if (panel.sparkline.full) {\n        plotCss.bottom = '5px';\n        plotCss.left = '-5px';\n        plotCss.width = width - 10 + 'px';\n        var dynamicHeightMargin = height <= 100 ? 5 : Math.round(height / 100) * 15 + 5;\n        plotCss.height = height - dynamicHeightMargin + 'px';\n      } else {\n        plotCss.bottom = '0px';\n        plotCss.left = '-5px';\n        plotCss.width = width - 10 + 'px';\n        plotCss.height = Math.floor(height * 0.25) + 'px';\n      }\n\n      plotCanvas.css(plotCss);\n\n      var options = {\n        legend: { show: false },\n        series: {\n          lines: {\n            show: true,\n            fill: 1,\n            lineWidth: 1,\n            fillColor: panel.sparkline.fillColor,\n          },\n        },\n        yaxes: { show: false },\n        xaxis: {\n          show: false,\n          mode: 'time',\n          min: ctrl.range.from.valueOf(),\n          max: ctrl.range.to.valueOf(),\n        },\n        grid: { hoverable: false, show: false },\n      };\n\n      elem.append(plotCanvas);\n\n      var plotSeries = {\n        data: data.flotpairs,\n        color: panel.sparkline.lineColor,\n      };\n\n      $.plot(plotCanvas, [plotSeries], options);\n    }\n\n    function setPanelBackground() {\n      if (panel.colorBackground) {\n        var color = getColorForValue(data, data.value);\n        if (color) {\n          $panelContainer.css('background-color', color);\n          if (scope.fullscreen) {\n            elem.css('background-color', color);\n          } else {\n            elem.css('background-color', '');\n          }\n        }\n      } else {\n        $panelContainer.css('background-color', '');\n        elem.css('background-color', '');\n      }\n    }\n\n    function render() {\n\n      if(!ctrl.data || ctrl.data.length===0)\n        return;\n\n      data = ctrl.data;\n\n      // get thresholds\n      data.thresholds = panel.thresholds.split(',').map(function(strVale) {\n        return Number(strVale.trim());\n      });\n      data.colorMap = panel.colors;\n\n      setPanelBackground();\n\n      elem.html('')\n      !panel.gauge.show && elem.append(getBigValueHtml());\n      panel.sparkline.show && addSparkline();\n      panel.gauge.show && addGauge();\n\n      elem.toggleClass('pointer', panel.links.length > 0);\n\n      linkInfo = null;\n    }\n\n    function hookupDrilldownLinkTooltip() {\n      // drilldown link tooltip\n      var drilldownTooltip = $('<div id=\"tooltip\" class=\"\">hello</div>\"');\n\n      elem.mouseleave(function() {\n        if (panel.links.length === 0) {\n          return;\n        }\n        $timeout(function() {\n          drilldownTooltip.detach();\n        });\n      });\n\n      elem.click(function(evt) {\n        if (!linkInfo) {\n          return;\n        }\n        // ignore title clicks in title\n        if ($(evt).parents('.panel-header').length > 0) {\n          return;\n        }\n\n        if (linkInfo.target === '_blank') {\n          window.open(linkInfo.href, '_blank');\n          return;\n        }\n\n        if (linkInfo.href.indexOf('http') === 0) {\n          window.location.href = linkInfo.href;\n        } else {\n          $timeout(function() {\n            $location.url(linkInfo.href);\n          });\n        }\n\n        drilldownTooltip.detach();\n      });\n\n      elem.mousemove(function(e) {\n        if (!linkInfo) {\n          return;\n        }\n\n        drilldownTooltip.text('click to go to: ' + linkInfo.title);\n        drilldownTooltip.place_tt(e.pageX, e.pageY - 50);\n      });\n    }\n\n    hookupDrilldownLinkTooltip();\n\n    this.events.on('render', function() {\n      render();\n      ctrl.renderingCompleted();\n    });\n  }\n}\n\nfunction getColorForValue(data, value) {\n  if (!_.isFinite(value)) {\n    return null;\n  }\n  for (var i = data.thresholds.length; i > 0; i--) {\n    if (value >= data.thresholds[i - 1]) {\n      return data.colorMap[i];\n    }\n  }\n  return _.first(data.colorMap);\n}\n\nfunction processTargets(targets) {\n  let whereClauses = targets\n    .map(elem => elem.whereClauses\n    .filter(elem=>elem.operator==\"=\"))\n    .map(elem=>elem.map(({ column, value })=>({ column, value })))\n  let metrics = targets.map(elem=>elem.metricAggs\n    .filter(elem=>elem.type=='raw'))\n    .map(elem=>elem.map(({ column })=>({ column })))\n\n  let entities = whereClauses.length > 0 ? whereClauses[0].map(elem=>elem) : []\n  let fields = metrics.length > 0 ? metrics[0].map(elem=>elem) : []\n\n  return [entities, fields]\n}\n\nStatisticsCtrl.templateUrl = 'partials/module.html';\n\nexport { StatisticsCtrl, StatisticsCtrl as PanelCtrl, getColorForValue };\n"]}